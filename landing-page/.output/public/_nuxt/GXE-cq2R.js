const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./izFmz8XC.js","./D41C2ElN.js","./entry.BnZsPqR-.css"])))=>i.map(i=>d[i]);
import{s as A,l as x,r as u,V as k,m as w,c as n,d as h,n as O,x as r,t as b,_ as P,o as c}from"./D41C2ElN.js";const C={class:"min-h-screen bg-gray-50 flex items-center justify-center"},R={class:"text-center"},E={key:0,class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},q={key:1,class:"text-red-500 text-4xl mb-4"},N={key:2,class:"text-green-500 text-4xl mb-4"},T={class:"text-xl font-semibold text-gray-900 mb-2"},z={class:"text-gray-600"},V={key:3,class:"mt-4"},M={__name:"callback",async setup(B){let i,g;const{useAuth:m}=([i,g]=A(()=>P(()=>import("./izFmz8XC.js"),__vite__mapDeps([0,1,2]),import.meta.url)),i=await i,g(),i),{handleOAuthCallback:f,isProcessingOAuth:v}=m(),l=x(),e=u(!0),s=u(null),t=u("Processing authentication..."),o=u("Please wait while we complete your sign-in."),_=async()=>{console.log("=== OAuth Callback Debug ==="),console.log("Route path:",l.path),console.log("Route query:",l.query),console.log("Route fullPath:",l.fullPath);const{code:a,error:d}=l.query;if(d){console.error("OAuth error:",d),s.value="Authentication failed",t.value="Authentication Error",o.value="There was an error during the authentication process.",e.value=!1;return}if(!a){console.error("No OAuth code found in URL"),console.log("Available query params:",Object.keys(l.query)),s.value="No authorization code",t.value="Missing Authorization",o.value="No authorization code was provided.",e.value=!1;return}if(console.log("OAuth code found:",a.substring(0,20)+"..."),console.log("Code length:",a.length),v.value){console.log("OAuth processing already in progress, waiting..."),t.value="Processing in progress...",o.value="Authentication is already being processed.";return}try{console.log("Auth callback page - processing OAuth callback..."),t.value="Authenticating...",o.value="Exchanging authorization code for access token...",console.log("Calling handleOAuthCallback with code..."),await f(a),t.value="Authentication Successful!",o.value="Redirecting to dashboard...",e.value=!1}catch(p){console.error("OAuth callback error:",p),s.value=p.message||"Authentication failed",t.value="Authentication Failed",o.value="There was an error during the authentication process. Please try again.",e.value=!1}},y=()=>{s.value=null,e.value=!0,t.value="Processing authentication...",o.value="Please wait while we complete your sign-in.",_()};return k(v,a=>{!a&&e.value&&setTimeout(()=>{e.value&&(e.value=!1)},1e3)}),w(async()=>{console.log("Auth callback page mounted"),await _()}),(a,d)=>(c(),n("div",C,[h("div",R,[r(e)?(c(),n("div",E)):r(s)?(c(),n("div",q,"❌")):(c(),n("div",N,"✅")),h("h2",T,b(r(t)),1),h("p",z,b(r(o)),1),r(s)?(c(),n("div",V,[h("button",{onClick:y,class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors"}," Thử lại ")])):O("",!0)])]))}};export{M as default};
